@page "/login"

@attribute [AllowAnonymous]

@inject IAuthService _authService;
@inject NavigationManager Navigation

<MudPaper Elevation="3" Outlined="true" Class="pa-10 ma-2">
    <MudText Typo="Typo.h4">Login</MudText>

    <MudForm Model="loginModel">
        <MudTextField Variant="Variant.Outlined" HelperText="Email"  Required="true" @bind-Value="loginModel.Email" />
        <MudTextField Variant="Variant.Outlined" HelperText="Password" Required="true" type="password"
            @bind-Value="loginModel.Password" />
        <MudButton Variant="Variant.Filled" Color="Color.Primary" @onclick="HandleLogin">Login</MudButton>
    </MudForm>
</MudPaper>

@code {
    LoginModel loginModel = new LoginModel();

    //DELETE
    protected override void OnParametersSet()
    {
        loginModel.Email = "obama2@gmail.com";
        loginModel.Password = "WarLord_13";
    }

    async Task HandleLogin()
    {
        string result = await _authService.Login(loginModel);
        if (result == "Authorized successfully") Navigation.NavigateTo("/");
    }
}